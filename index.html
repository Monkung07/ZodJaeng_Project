<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <title>Zod Party Game</title>
    <link rel="stylesheet" href="index.css">
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Sarabun:wght@400;700;900&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons+Round" rel="stylesheet">
    <style id="dynamic-card-style"></style>

</head>
<body>

    <div id="landing-screen">
        <button onclick="enterGameMenu()" class="zod-play-btn">PLAY</button>
    </div>

    <div id="menu-screen">
        <h1 class="menu-title">‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÇ‡∏´‡∏°‡∏î</h1>
        
        <div class="menu-buttons-wrapper">
            <div class="game-card-btn btn-zod" onclick="selectGame('party')">
                <span class="game-card-icon material-icons-round">local_bar</span>
                <div class="game-card-info">
                    <h3>Zod Party</h3>
                    <p>100+ Cards</p>
                </div>
            </div>

            <div class="game-card-btn btn-standard" onclick="selectGame('standard')">
                 <span class="game-card-icon material-icons-round">style</span>
                <div class="game-card-info">
                    <h3>Classic 52</h3>
                    <p>Standard Deck</p>
                </div>
            </div>
        </div>
    </div>

    <div id="game-screen">
        <div class="fixed top-12 left-6 z-50">
            <button onclick="backToMenu()" class="side-btn" style="width: 50px; height: 50px;">
                <span class="material-icons-round" style="font-size: 24px;">arrow_back</span>
            </button>
        </div>

        <div class="fixed top-12 w-full text-center z-40 pointer-events-none px-12">
            <h1 id="status-text" class="text-3xl md:text-5xl font-bold drop-shadow-[0_2px_4px_rgba(0,0,0,0.8)] text-pop leading-tight" style="color: var(--accent);">
                ‡∏û‡∏£‡πâ‡∏≠‡∏°‡πÅ‡∏•‡πâ‡∏ß...
            </h1>
            <p id="card-count" class="text-white/60 text-sm mt-2 font-bold"></p>
        </div>

        <div class="fixed right-4 top-1/2 transform -translate-y-1/2 z-50 flex flex-col items-center">
            <button onclick="toggleModal(true)" class="side-btn">
                <span class="material-icons-round">edit</span>
                <p>‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤</p>
            </button>
            <button id="btn-shuffle" onclick="startShuffleSequence()" class="side-btn">
                <span class="material-icons-round">shuffle</span>
                <p>‡∏™‡∏±‡∏ö‡πÑ‡∏û‡πà</p>
            </button>
            <button onclick="instantRestart()" class="side-btn">
                <span class="material-icons-round">replay</span>
                <p>‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÉ‡∏´‡∏°‡πà</p>
            </button>
        </div>

        <div class="scene">
            <div class="deck-container" id="deck"></div>
        </div>
    </div>

    <div id="custom-modal" class="fixed inset-0 z-[100] hidden bg-black/80 flex items-center justify-center p-4">
        <div class="glass-panel w-full max-w-md p-6 rounded-2xl text-white">
            <div class="flex justify-between items-center mb-6">
                <h2 class="text-2xl font-bold drop-shadow-sm flex items-center gap-2" style="color: var(--accent);">
                    <span class="material-icons-round">settings</span> ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡πÄ‡∏Å‡∏°
                </h2>
                <button onclick="toggleModal(false)" class="text-white/50 hover:text-white transition">
                    <span class="material-icons-round">close</span>
                </button>
            </div>

            <div class="space-y-6">
                <div>
                    <label class="text-xs text-white/60 uppercase tracking-wider font-bold mb-2 block">‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏£‡∏π‡∏õ‡∏´‡∏•‡∏±‡∏á‡πÑ‡∏û‡πà</label>
                    <div class="flex gap-2">
                        <label class="file-upload-label flex-1">
                            <span class="material-icons-round" style="color: var(--accent);">add_photo_alternate</span>
                            <span id="upload-text">‡∏≠‡∏±‡∏õ‡πÇ‡∏´‡∏•‡∏î‡∏£‡∏π‡∏õ‡πÉ‡∏´‡∏°‡πà</span>
                            <input type="file" class="hidden" accept="image/*" onchange="handleImageUpload(this)">
                        </label>
                        <button onclick="resetCardBack()" class="px-4 rounded-xl border border-white/20 text-white/50 hover:text-white hover:bg-white/10">
                            <span class="material-icons-round">refresh</span>
                        </button>
                    </div>
                </div>

                <hr class="border-white/10">

                <div>
                    <label class="text-xs text-white/60 uppercase tracking-wider font-bold mb-2 block">‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏™‡∏µ‡∏ò‡∏µ‡∏° (Accent)</label>
                    <div class="flex gap-3 justify-center bg-black/40 p-3 rounded-xl border border-white/10">
                        <div class="theme-btn" onclick="setTheme('zod')" id="theme-zod"><div class="theme-btn-inner" style="background: #FACC15;"></div></div>
                        <div class="theme-btn" onclick="setTheme('red')" id="theme-red"><div class="theme-btn-inner" style="background: #EF4444;"></div></div>
                        <div class="theme-btn" onclick="setTheme('blue')" id="theme-blue"><div class="theme-btn-inner" style="background: #3B82F6;"></div></div>
                        <div class="theme-btn" onclick="setTheme('purple')" id="theme-purple"><div class="theme-btn-inner" style="background: #8B5CF6;"></div></div>
                    </div>
                </div>

                <hr class="border-white/10">

                <div id="party-options">
                    <label class="text-xs text-white/60 uppercase tracking-wider font-bold mb-2 block">‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Å‡∏≤‡∏£‡πå‡∏î‡πÉ‡∏´‡∏°‡πà</label>
                    <div class="space-y-3">
                        <input type="text" id="inp-text" placeholder="‡πÄ‡∏ä‡πà‡∏ô ‡∏Ñ‡∏ô‡∏ã‡πâ‡∏≤‡∏¢‡πÇ‡∏î‡∏ô 2 ‡πÅ‡∏Å‡πâ‡∏ß..." class="w-full p-3 rounded-xl">
                        <div class="flex gap-3">
                            <div class="w-2/3 relative">
                                <div class="custom-select-trigger" onclick="toggleCustomSelect()">
                                    <span id="selected-val-display" class="flex items-center gap-2">üç∫ ‡∏î‡∏∑‡πà‡∏° (Drink)</span>
                                    <span class="material-icons-round text-sm">expand_more</span>
                                </div>
                                <div class="custom-options" id="custom-options-list">
                                    <div class="custom-option selected" onclick="selectOption('drink', 'üç∫ ‡∏î‡∏∑‡πà‡∏° (Drink)')">üç∫ ‡∏î‡∏∑‡πà‡∏° (Drink)</div>
                                    <div class="custom-option" onclick="selectOption('hard', 'üî• ‡πÇ‡∏´‡∏î (Hard)')">üî• ‡πÇ‡∏´‡∏î (Hard)</div>
                                    <div class="custom-option" onclick="selectOption('action', 'üíÉ ‡∏Å‡∏¥‡∏à‡∏Å‡∏£‡∏£‡∏° (Action)')">üíÉ ‡∏Å‡∏¥‡∏à‡∏Å‡∏£‡∏£‡∏° (Action)</div>
                                    <div class="custom-option" onclick="selectOption('lucky', 'üçÄ ‡∏£‡∏≠‡∏î‡∏ï‡∏±‡∏ß (Lucky)')">üçÄ ‡∏£‡∏≠‡∏î‡∏ï‡∏±‡∏ß (Lucky)</div>
                                </div>
                                <input type="hidden" id="inp-type" value="drink">
                            </div>
                            <input type="number" id="inp-count" value="1" min="1" max="50" class="w-1/3 p-3 rounded-xl text-center">
                        </div>
                        <button onclick="addCustomCard()" class="w-full font-bold py-3 rounded-xl shadow-lg transition transform active:scale-95" style="background-color: var(--accent); color: var(--text-on-accent);">
                            + ‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏Ç‡πâ‡∏≤‡∏Å‡∏≠‡∏á
                        </button>
                    </div>
                    
                    <div class="flex flex-col gap-3 mt-4">
                        <div class="flex justify-between text-sm text-white/60 px-1">
                            <span>‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏≠‡∏á: <strong id="custom-count-display" style="color: var(--accent);">0</strong> ‡πÉ‡∏ö</span>
                        </div>
                        <div class="flex gap-3">
                             <button onclick="openConfirm('clearCustom')" class="flex-1 py-3 border border-red-500/40 text-red-300 rounded-xl hover:bg-red-500/20 text-sm font-bold">‡∏•‡πâ‡∏≤‡∏á‡∏ó‡∏µ‡πà‡πÄ‡∏û‡∏¥‡πà‡∏°</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div id="confirm-modal" class="fixed inset-0 z-[110] hidden bg-black/80 flex items-center justify-center p-4">
        <div class="glass-panel w-full max-w-sm p-6 rounded-2xl text-center">
            <h3 id="confirm-title" class="text-xl font-bold text-white mb-2">‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô?</h3>
            <p id="confirm-desc" class="text-white/60 text-sm mb-6">...</p>
            <div class="flex gap-3">
                <button onclick="closeConfirm()" class="flex-1 py-2 rounded-lg border border-white/20 text-white">‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å</button>
                <button id="confirm-yes-btn" class="flex-1 py-2 rounded-lg bg-red-500 text-white font-bold">‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô</button>
            </div>
        </div>
    </div>
    <script src="index.js"></script>
</body>
</html>